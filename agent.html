<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Module agent</title>
<link rel="stylesheet" type="text/css" href="stylesheet.css" title="EDoc">
</head>
<body bgcolor="white">
<div class="navbar"><a name="#navbar_top"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<hr>

<h1>Module agent</h1>
<ul class="index"><li><a href="#description">Description</a></li><li><a href="#types">Data Types</a></li><li><a href="#index">Function Index</a></li><li><a href="#functions">Function Details</a></li></ul>A gen_fsm representing the agent's state.

<p><b>Behaviours:</b> <a href="gen_fsm.html"><tt>gen_fsm</tt></a>.</p>

<h2><a name="description">Description</a></h2>A gen_fsm representing the agent's state.  When idle, channels are
  available to ring.  When released, channels are not.
<h2><a name="types">Data Types</a></h2>

<h3 class="typedecl"><a name="type-agent_opt">agent_opt()</a></h3>
<p><tt>agent_opt() = {nodes, [atom()]} | logging</tt></p>


<h3 class="typedecl"><a name="type-agent_opts">agent_opts()</a></h3>
<p><tt>agent_opts() = [<a href="#type-agent_opt">agent_opt()</a>]</tt></p>


<h2><a name="index">Function Index</a></h2>
<table width="100%" border="1" cellspacing="0" cellpadding="2" summary="function index"><tr><td valign="top"><a href="#add_skills-2">add_skills/2</a></td><td>Returns the #call{} of the current state if there is on, otherwise
  returns <code>invalid</code>.</td></tr>
<tr><td valign="top"><a href="#blab-2">blab/2</a></td><td>Send a message to the human agent.</td></tr>
<tr><td valign="top"><a href="#change_profile-2">change_profile/2</a></td><td></td></tr>
<tr><td valign="top"><a href="#dump_state-1">dump_state/1</a></td><td>Returns the entire agent record for the agent at <code>Pid</code>.</td></tr>
<tr><td valign="top"><a href="#get_endpoint-2">get_endpoint/2</a></td><td>Get the endpoint for a given module from the agent record.</td></tr>
<tr><td valign="top"><a href="#handle_event-3">handle_event/3</a></td><td></td></tr>
<tr><td valign="top"><a href="#handle_info-3">handle_info/3</a></td><td></td></tr>
<tr><td valign="top"><a href="#handle_sync_event-4">handle_sync_event/4</a></td><td></td></tr>
<tr><td valign="top"><a href="#idle-2">idle/2</a></td><td></td></tr>
<tr><td valign="top"><a href="#idle-3">idle/3</a></td><td></td></tr>
<tr><td valign="top"><a href="#precall-2">precall/2</a></td><td></td></tr>
<tr><td valign="top"><a href="#prering-2">prering/2</a></td><td></td></tr>
<tr><td valign="top"><a href="#query_state-1">query_state/1</a></td><td>Returns <code>{ok, Statename :: atom()}</code>, where <code>Statename</code> is the current state of the agent at <code>Pid</code>.</td></tr>
<tr><td valign="top"><a href="#register_rejected-1">register_rejected/1</a></td><td>When the agent manager can't register an agent, it 'casts' to this.</td></tr>
<tr><td valign="top"><a href="#released-2">released/2</a></td><td></td></tr>
<tr><td valign="top"><a href="#released-3">released/3</a></td><td></td></tr>
<tr><td valign="top"><a href="#remove_skills-2">remove_skills/2</a></td><td></td></tr>
<tr><td valign="top"><a href="#ringing-2">ringing/2</a></td><td></td></tr>
<tr><td valign="top"><a href="#set_connection-2">set_connection/2</a></td><td>link the given agent  <code>Pid</code> to the given connection <code>Socket</code>.</td></tr>
<tr><td valign="top"><a href="#set_endpoint-3">set_endpoint/3</a></td><td>Set the endpoint data for a specific module.</td></tr>
<tr><td valign="top"><a href="#set_endpoints-2">set_endpoints/2</a></td><td>Set multiple endpoints for an agent.</td></tr>
<tr><td valign="top"><a href="#set_release-2">set_release/2</a></td><td>Set the agent released or idle.</td></tr>
<tr><td valign="top"><a href="#start-1">start/1</a></td><td>Start an agent with default options.</td></tr>
<tr><td valign="top"><a href="#start-2">start/2</a></td><td>Start an agent fsm for the passed in agent record <code>Agent</code> with the given
  options.</td></tr>
<tr><td valign="top"><a href="#start_link-2">start_link/2</a></td><td>Start an agent fsm for the passed in agent record <code>Agent</code> that is linked
  to the calling process with the given options.</td></tr>
<tr><td valign="top"><a href="#stop-1">stop/1</a></td><td>Stop the passed agent fsm <code>Pid</code>.</td></tr>
</table>

<h2><a name="functions">Function Details</a></h2>

<h3 class="function"><a name="add_skills-2">add_skills/2</a></h3>
<div class="spec">
<p><tt>add_skills(Apid::pid(), Skills::[atom() | {atom(), any()}]) -&gt; ok</tt><br></p>
</div><p>Returns the #call{} of the current state if there is on, otherwise
  returns <code>invalid</code>.
-spec(get_media/1 :: (Apid :: pid()) -&gt; {ok, #call{}} | 'invalid').
get_media(Apid) -&gt;
	gen_fsm:sync_send_event(Apid, get_media).</p>

<h3 class="function"><a name="blab-2">blab/2</a></h3>
<div class="spec">
<p><tt>blab(Pid::pid(), Text::string()) -&gt; ok</tt><br></p>
</div><p>Send a message to the human agent.  If there's no connection, it black-holes.</p>

<h3 class="function"><a name="change_profile-2">change_profile/2</a></h3>
<div class="spec">
<p><tt>change_profile(Apid::pid(), Profile::string()) -&gt; ok | {error, unknown_profile}</tt><br></p>
</div>

<h3 class="function"><a name="dump_state-1">dump_state/1</a></h3>
<div class="spec">
<p><tt>dump_state(Pid::pid()) -&gt; #agent{}</tt><br></p>
</div><p>Returns the entire agent record for the agent at <code>Pid</code>.</p>

<h3 class="function"><a name="get_endpoint-2">get_endpoint/2</a></h3>
<div class="spec">
<p><tt>get_endpoint(Module::atom(), Agent::#agent{}) -&gt; {ok, any()} | inband | {error, any()}</tt><br></p>
</div><p>Get the endpoint for a given module from the agent record.</p>

<h3 class="function"><a name="handle_event-3">handle_event/3</a></h3>
<div class="spec">
<p><tt>handle_event(Msg, Statename, State) -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="handle_info-3">handle_info/3</a></h3>
<div class="spec">
<p><tt>handle_info(Msg, StateName, State) -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="handle_sync_event-4">handle_sync_event/4</a></h3>
<div class="spec">
<p><tt>handle_sync_event(Msg, From, StateName, State) -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="idle-2">idle/2</a></h3>
<div class="spec">
<p><tt>idle(Msg, State) -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="idle-3">idle/3</a></h3>
<div class="spec">
<p><tt>idle(Msg, From, State) -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="precall-2">precall/2</a></h3>
<div class="spec">
<p><tt>precall(Apid, Media) -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="prering-2">prering/2</a></h3>
<div class="spec">
<p><tt>prering(Apid, Data) -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="query_state-1">query_state/1</a></h3>
<div class="spec">
<p><tt>query_state(Pid::pid()) -&gt; {ok, atom()}</tt><br></p>
</div><p>Returns <code>{ok, Statename :: atom()}</code>, where <code>Statename</code> is the current state of the agent at <code>Pid</code>.</p>

<h3 class="function"><a name="register_rejected-1">register_rejected/1</a></h3>
<div class="spec">
<p><tt>register_rejected(Pid::pid()) -&gt; ok</tt><br></p>
</div><p>When the agent manager can't register an agent, it 'casts' to this.</p>

<h3 class="function"><a name="released-2">released/2</a></h3>
<div class="spec">
<p><tt>released(Msg, State) -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="released-3">released/3</a></h3>
<div class="spec">
<p><tt>released(Msg, From, State) -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="remove_skills-2">remove_skills/2</a></h3>
<div class="spec">
<p><tt>remove_skills(Apid::pid(), Skills::[atom() | {atom(), any()}]) -&gt; ok</tt><br></p>
</div>

<h3 class="function"><a name="ringing-2">ringing/2</a></h3>
<div class="spec">
<p><tt>ringing(Apid, Call) -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="set_connection-2">set_connection/2</a></h3>
<div class="spec">
<p><tt>set_connection(Pid::pid(), Socket::pid()) -&gt; ok | error</tt><br></p>
</div><p>link the given agent  <code>Pid</code> to the given connection <code>Socket</code>.</p>

<h3 class="function"><a name="set_endpoint-3">set_endpoint/3</a></h3>
<div class="spec">
<p><tt>set_endpoint(Agent::pid(), Module::atom(), Data::any()) -&gt; ok | {error, any()}</tt><br></p>
</div><p>Set the endpoint data for a specific module.  The calling process is
  forced to do much of the verification that the module mentioned exists
  and implements the gen_media behaviour.  Data can be 'inband',
  {'module', atom()}, or arbitary data.</p>

<h3 class="function"><a name="set_endpoints-2">set_endpoints/2</a></h3>
<div class="spec">
<p><tt>set_endpoints(Agent::pid(), Endpoints::[{atom(), any()}]) -&gt; ok</tt><br></p>
</div><p>Set multiple endpoints for an agent.</p>

<h3 class="function"><a name="set_release-2">set_release/2</a></h3>
<div class="spec">
<p><tt>set_release(Pid::pid(), Released::none | default | <a href="#type-release_code">release_code()</a>) -&gt; ok</tt><br></p>
</div><p>Set the agent released or idle.</p>

<h3 class="function"><a name="start-1">start/1</a></h3>
<div class="spec">
<p><tt>start(Agent::#agent{}) -&gt; {ok, pid()}</tt><br></p>
</div><p>Start an agent with default options.</p>

<h3 class="function"><a name="start-2">start/2</a></h3>
<div class="spec">
<p><tt>start(Agent::#agent{}, Options::<a href="#type-agent_opts">agent_opts()</a>) -&gt; {ok, pid()}</tt><br></p>
</div><p>Start an agent fsm for the passed in agent record <code>Agent</code> with the given
  options.</p>

<h3 class="function"><a name="start_link-2">start_link/2</a></h3>
<div class="spec">
<p><tt>start_link(Agent::#agent{}, Options::<a href="#type-agent_opts">agent_opts()</a>) -&gt; {ok, pid()}</tt><br></p>
</div><p>Start an agent fsm for the passed in agent record <code>Agent</code> that is linked
  to the calling process with the given options.</p>

<h3 class="function"><a name="stop-1">stop/1</a></h3>
<div class="spec">
<p><tt>stop(Pid::pid()) -&gt; ok</tt><br></p>
</div><p>Stop the passed agent fsm <code>Pid</code>.</p>
<hr>

<div class="navbar"><a name="#navbar_bottom"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<p><i>Generated by EDoc, Mar 19 2012, 15:03:24.</i></p>
</body>
</html>
