<script type="text/javascript">
	dojo.require("dijit.form.HorizontalSlider");
	dojo.require("dijit.form.VerticalSlider");
	dojo.require("dijit.form.VerticalRule");
	dojo.require("dijit.form.VerticalRuleLabels");
	if(! window.freeswitch){
		window.freeswitch = {
			onHoldButton: false,
			onHoldButtonSub: dojo.subscribe('OpenACD/Agent/mediaevent/voice', function(data){
				var onHoldb = dijit.byId(window.freeswitch.onHoldButton);
				if(! onHoldb){
					window.freeswitch.onHoldButton = false;
					return;
				}
				if(data['event'] == 'caller_hold'){
					onHoldb.set('label', '<span class="loss">&bull;</span> Unhold');
				} else if(data['event'] == 'caller_offhold'){
					onHoldb.set('label', '<span class="profit">&bull;</span> Hold');
				}
			}),
			dialBoxSub: dojo.subscribe('OpenACD/Agent/mediaevent/voice', function(data){
				switch(data['event']){
					case 'caller_hold':
					case 'hold_conference':
						dojo.query("#voiceDialBox").style('display', 'block');
						break;
					default:
						dojo.query("#voiceDialBox").style('display', 'none');
				}
			})
		};
	}
</script>

<div dojoType="dijit.layout.ContentPane" style="height:400px;padding-left:10px; padding-top:5px;">
	<div id="micBoost" dojoType="dijit.form.VerticalSlider" value="0" minimum="-4" maximum="4" discreteValues="9" intermediateChanges="false" showButtons="false" style="height:200px; float: left;">
		<script type="dojo/connect" event="onChange">
			agentConnection.agentApi("media_command", {}, "audio_level", "cast", ["write", this.attr('value')]);
		</script>
		<div dojoType="dijit.form.VerticalRule" container="rightDecoration" count="9" style="width:5px"></div>
		<ol dojoType="dijit.form.VerticalRuleLabels" container="rightDecoration"
			style="width:1em;font-size:75%;color:gray;">
			<li>
			-4
			</li>
			<li>
			0
			</li>
			<li>
			4
			</li>
	</div>
	<div id="speakerBoost" dojoType="dijit.form.VerticalSlider" value="0" minimum="-4" maximum="4" discreteValues="9" intermediateChanges="false" showButtons="false" style="height:200px;">
		<script type="dojo/connect" event="onChange">
			agentConnection.agentApi("media_command", {}, "audio_level", "cast", ["read", this.attr('value')]);
		</script>
		<div dojoType="dijit.form.VerticalRule" container="leftDecoration" count="9" style="width:5px"></div>
	</div>
	<img src="/images/mic.png" 		width="15px" style="padding: 2px 2px 2px 0px" />
	<img src="/images/speaker.png" 	width="15px" style="padding: 2px 0px 2px 2px" />
</div>
<p>
<button dojoType="dijit.form.Button">
	<span class="profit">&bull;</span> Hold
	<script type="dojo/method" event="postCreate">
		window.freeswitch.onHoldButton = this.id;
	</script>
	<script type="dojo/connect" event="onClick">
		agentConnection.agentApi("media_command", {}, "toggle_hold", "cast", "");
	</script>
</button>
</p>
<p id="voiceDialBox">
	<input name="dialNumber" dojoType="dijit.form.TextBox">
	</input>
</p>
