What's a call?
id: String
type: atom
callerid:  string
source: Media Manager Pid
bound: list of dispater pid's
client:  client record
skills:  list of atoms

delivery recipe:

a delivery recipe ticks every 10 seconds.
One delivery reciple process per call, so that 'ticks' are based on the calls '0 hour' rather than all ticking at once.

[{Ticks, operation, [arguments], run_once | run_many}, 
...]

Ticks:
	On every nth Tick evaluate this.

operations:  an atom of:
	new_queue
	add_skills
	remove_skills
	set_priority
	prioritize
	deprioritize
	voicemail
	announce
	add_recipe
	
arguments: determined by the operation.

run_once | run_many
	run_once means remove this recipe after it has run
	run_many means continue running every nth Tick.
	
dispatcher matching a call to agent:
select from agents with the shortest skill list that contains all the calls required skills ordered by the agent's idle time descending.

(queue_wieight * calls_in_queue) / total_wieght = % time a dispatcher should go to this queue.
Need to find a way to round robin the above, for now biased random.
bias up local calls rather than remote ons.
path_bonus, if local is potentially 10, lower if remoter.

dispatchers are spawned and killed as a ratio of agents avialable (rather than total agents like stated earlier).

each call that comes in will have a required skill named the same as the node it is local too.  Each agent on that node will have the same skill.  A default recipe will remove that skill from the call after a certin amount of time, thus opening the call to non-local agents.

magic skills:  _node translates to the node, and _agent translate to an agent's login.  All skills that start with an underscore are reserved as magic skills.



We can get the most important call,
and we can get matches of agents (list of agents).
algorithm for waiting on sending it over.
on tick:
	ask dispatchers for thier lists (m-m-m-m-multicast!)
	
path costs:
	local :  +0
	remote:  +X (for now, later each node may know it's own uplink cost, chanign this to Node1+node2)
	skills: +skills
	idle: +laststatechange
	
