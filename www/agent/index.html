<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<title>Agent UI</title>
<style type="text/css">
  @import "/dojo/dijit/themes/nihilo/nihilo.css";
  .statusdisplay {
		padding:1.5em
  }
  
  label{
        width: 10em;
        float: left;
        text-align:right;
        margin-right:0.1em;
        display:block;
        font-weight:bold;
        clear:both;
	}
	
	label.narrow{
		width: 5em;
	}
	
	p label.narrow{
		width: 7em;
	}
	
	.smaller{
		font-size:smaller;
	}
	
</style>
	<link rel="stylesheet" href="/dojo/dojox/layout/Resources/FloatingPane.css">	
	<link rel="stylesheet" href="/dojo/dojox/layout/Resources/ResizeHandle.css">
	<link rel="stylesheet" href="/application/css/email.css">
<script type="text/javascript">
	/* this is lame, why do cookies suck in JS? */
	var cookies = document.cookie.split('; ');
	var locale = "";
	for(var i = 0; i < cookies.length; i++) {
		var stuff = cookies[i].split("=");
		if (stuff[0] == "cpx_lang") {
			locale = stuff[1];
		}
	}
	var djConfig = {
		modulePaths: {agentUI: "/application"},
		parseOnLoad: true,
		isDebug: false,
		locale: locale
	};
</script>
<script type="text/javascript" src="/dojo/dojo/dojo.js"></script>
<script type="text/javascript">
	dojo.require("dijit.layout.BorderContainer");
	dojo.require("dijit.layout.ContentPane");
	dojo.require("dijit.layout.TabContainer");
	dojo.require("dijit.form.SimpleTextarea");
	dojo.require("dijit.form.Button");
	dojo.require("dijit.form.Form");
	dojo.require("dojox.timing");
	dojo.require("dijit.Dialog");
	dojo.require("dojox.encoding.digests.MD5");
	dojo.require("dijit.form.ComboBox");
	dojo.require("dojox.layout.ContentPane");
	dojo.require("dojox.layout.FloatingPane");
	//dojo.require("dijit.Menu");
	dojo.requireLocalization("agentUI", "labels");
	function init()
	{
		if (dojo.config.locale == "") {
			dojo.byId("loginerrp").style.display = "block";
			dojo.byId("loginerrspan").innerHTML="No translation for any locales<br/>matching your request, sorry.";
		}
	}
	dojo.addOnLoad(init);

</script>

<script type="text/javascript" src="/dojo/dojox/timer.js"></script>
<script type="text/javascript" src="/eventLog.js"></script>
<script type="text/javascript" src="/Stopwatch.js"></script>
<script type="text/javascript" src="/Agent.js"></script>

<script type="text/javascript" src="/main.js"></script>
</head>
<body class="nihilo">

<div dojoType="dojox.layout.FloatingPane" resizable="true" style="width:60%; height:400px; top:100px; left:400px; position:absolute; z-index:50000;" title="Email" closable="false" dockable="true" dockTo="rightDock" id="emaildispfloater">
		<div dojoType="dijit.layout.ContentPane" id="emaildisp" height="50%"><p style="padding:12px;">nocontent</p></div>
		<div dojoType="dijit.form.Form" id="emailform" action="/mediapush" method="post">
			<p><textarea dojoType="dijit.form.SimpleTextarea" id="emailtext" name="emailtext" width="80%" rows="10"></textarea></p>
			<p><button dojoType="dijit.form.Button" id="emailsubmit" type="submit">
				<script type="dojo/method" event="postCreate">
					this.setLabel(dojo.i18n.getLocalization("agentUI", "labels").SUBMIT);
				</script>
			</button></p>
		</div>
</div> 

<div dojoType="dijit.Dialog" title="Login" id="loginpane">
	<script type="dojo/connect" event="onShow">
		this.setAttribute("title", dojo.i18n.getLocalization("agentUI", "labels").LOGIN);
	</script>

	<div dojoType="dijit.form.Form" id="loginform" jsId="loginform" action="/login" method="post">
		<p  id="loginerrp" style="font-size:smaller;display:none"><center><span id="loginerrspan" style="color:#ff0000"></span></center></p>
		<p>
			<label for="username" id="usernamelabel">
				<script type="text/javascript">
					dojo.byId("usernamelabel").innerHTML = dojo.i18n.getLocalization("agentUI", "labels").USERNAME + ":";
				</script>
			</label>
			<input type="text" name="username" value="" dojoType="dijit.form.TextBox" trim="true" id="username" />
		</p>
		<p>
			<label for="password" id="passwordlabel">
				<script type="text/javascript">
					dojo.byId("passwordlabel").innerHTML = dojo.i18n.getLocalization("agentUI", "labels").PASSWORD + ":";
				</script>
			</label>
			<input type="password" name="password" value="" dojoType="dijit.form.TextBox" id="password" />
		</p>
		<p>
			<label for="voipendpoint" id="voipendpointlabel">
				<script type="text/javascript">
					dojo.byId("voipendpointlabel").innerHTML = dojo.i18n.getLocalization("agentUI", "labels").VOIPENDPOINT + ":";
				</script>
			</label>
			<select dojoType="dijit.form.ComboBox" autocomplete="false" value="SIP Registration" id="voipendpoint" name="voipendpoint" onchange="endpointselect()">
				<option selected="selected">SIP Registration</option>
				<option >SIP URI</option>
				<option >IAX2 URI</option>
				<option >H323 URI</option>
				<option >PSTN Number</option>
			</select>
		</p>
		<p>
			<label for="voipendpointdata" id="voipendpointdatalabel">
				<script type="text/javascript">
					dojo.byId("voipendpointdatalabel").innerHTML = dojo.i18n.getLocalization("agentUI", "labels").VOIPENDPOINTDATA + ":";
				</script>
			</label>
			<input type="text" name="voipendpointdata" value="" dojoType="dijit.form.TextBox" trim="true" id="voipendpointdata" />
			<div dojoType="dijit.Tooltip" connectId="voipendpointdata" label="UNTRANSLATED" id="voipendpointdatahint">
				<script type="dojo/method" event="postCreate">
					endpointselect();
				</script>
			</div>
		</p>
		<p>
			<label for="loginsubmit">&nbsp;</label>
			<button dojoType="dijit.form.Button" id="loginsubmit" type="submit">
				<script type="dojo/method" event="postCreate">
					this.setLabel(dojo.i18n.getLocalization("agentUI", "labels").LOGIN);
				</script>
			</button>
		</p>
	</div>
</div>

<div dojoType="dijit.layout.BorderContainer" style="width: 100%; height:600px; border: 1px solid #ccc;visibility:hidden" id="main">
	<div dojoType="dijit.layout.ContentPane" region="top">
		<span style="float:right">
			<span class="statusdisplay" id="timerdisp">Time</span>
			<span class="statusdisplay" id="profiledisp">Profile:Goober</span>
			<span class="statusdisplay" id="statedisp">State:denial</span>
		</span>

		<div dojoType="dijit.form.DropDownButton" id="filemenubutton">
			<script type="dojo/method" event="postCreate">
				this.setLabel(dojo.i18n.getLocalization("agentUI", "labels").FILE);
			</script>
			<span>000</span>
			<div dojoType="dijit.Menu" id="Filemenu">
				<div dojoType="dijit.MenuItem" label="000" id="miHangup" onclick=agent.setState("wrapup");>
					<script type="dojo/method" event="postCreate">
						this.setLabel(dojo.i18n.getLocalization("agentUI", "labels").HANGUP);
					</script>
				</div>
				<div dojoType="dijit.MenuItem" label="000" id="miLogout" onclick=logout(agent);>
					<script type="dojo/method" event="postCreate">
						this.setLabel(dojo.i18n.getLocalization("agentUI", "labels").LOGOUT);
					</script>
				</div>
			</div>
		</div>
		<div dojoType="dijit.form.DropDownButton" id="editmenubutton">
			<script type="dojo/method" event="postCreate">
				this.setLabel(dojo.i18n.getLocalization("agentUI", "labels").EDIT);
			</script>
			<span>000</span>
			<div dojoType="dijit.Menu" id="Editmenu">
				<div dojoType="dijit.MenuItem" label="000" onclick="alert('NYI');">
					<script type="dojo/method" event="postCreate">
						this.setLabel(dojo.i18n.getLocalization("agentUI", "labels").CONFIG);
					</script>
				</div>
			</div>
		</div>
		<div dojoType="dijit.form.DropDownButton" id="viewmenubutton">
			<script type="dojo/method" event="postCreate">
				this.setLabel(dojo.i18n.getLocalization("agentUI", "labels").VIEW);
			</script>
			<span>000</span>
			<div dojoType="dijit.Menu" id="Viewmenu">
				<div dojoType="dijit.MenuItem" label="000" onclick="alert('NYI Tundra');">
					<script type="dojo/method" event="postCreate">
						this.setLabel(dojo.i18n.getLocalization("agentUI", "labels").TUNDRA);
					</script>
				</div>
				<div dojoType="dijit.MenuItem" label="000" onclick="alert('NYI nihilo');">
					<script type="dojo/method" event="postCreate">
						this.setLabel(dojo.i18n.getLocalization("agentUI", "labels").NIHILO);
					</script>
				</div>
			</div>
		</div>
		<div dojoType="dijit.form.DropDownButton" id="tabsmenubutton">
			<script type="dojo/method" event="postCreate">
				this.setLabel(dojo.i18n.getLocalization("agentUI", "labels").TABS);
			</script>
			<span>000</span>
			<div dojoType="dijit.Menu" id="Tabsmenu">
				<div dojoType="dijit.PopupMenuItem">
					<script type="dojo/method" event="postCreate">
						this.setLabel(dojo.i18n.getLocalization("agentUI", "labels").LOADTAB);
					</script>
					<span>000</span>
					<div dojoType="dijit.Menu">
						<div dojoType="dijit.MenuItem">Supervisor
							<script type="dojo/connect" event="onClick">
								if(! dijit.byId("supervisorTab")){							
									var t = new dojox.layout.ContentPane({
										//href:"tabs/supervisor.html",
										title:"Supervisor",
										executeScripts: "true",
										id:"supervisorTab"
									});
									dijit.byId("tabPanel").addChild(t);
								}
								//this.setDisabled(true);
								dijit.byId("supervisorTab").setHref("tabs/supervisor.html");
								dijit.byId("tabPanel").selectChild("supervisorTab");
							</script>
						</div>
					</div>
				</div>
			</div>
		</div>
		
	</div>
	<div dojoType="dijit.layout.TabContainer" region="center" id="tabPanel">
		<div dojoType="dijit.layout.ContentPane" title="000" id="maintab">
			<script type="dojo/method" event="postCreate">
				this.title = dojo.i18n.getLocalization("agentUI", "labels").MAIN;
			</script>
			<p id="agentnamep"><label for="agentname" id="agentlabel">
				<script type="text/javascript">
					dojo.byId("agentlabel").innerHTML = dojo.i18n.getLocalization("agentUI", "labels").AGENT;
				</script>
			</label><span id="agentname"></span></p>
			<p id="agentstatep"><label for="state" id="statelabel">
				<script type="text/javascript">
					dojo.byId("statelabel").innerHTML = dojo.i18n.getLocalization("agentUI", "labels").STATE;
				</script>
			</label><span id="state">Login needed</span></p>
			<p id="agentbrandp" style="display:none"><label for="brand" id="brandlabel">
				<script type="text/javascript">
					dojo.byId("brandlabel").innerHTML = dojo.i18n.getLocalization("agentUI", "labels").BRAND;
				</script>
			</label><span id="brand"></span></p>
			<p id="calleridp" style="display:none"><label for="callerid" id="calleridlabel">
				<script type="text/javascript">
					dojo.byId("calleridlabel").innerHTML = dojo.i18n.getLocalization("agentUI", "labels").CALLERID;
				</script>
			</label><span id="callerid"></span></p>
		</div>
		<!--<div dojoType="dijit.layout.ContentPane" title="Agents" id="agentstab">Tab 2</div>
		<div dojoType="dijit.layout.ContentPane" title="Queues" id="queuestab">Tab 2</div>-->
		<div dojoType="dijit.layout.ContentPane" title="000" id="eventLog">
			<script type="dojo/method" event="postCreate">
				this.title = dojo.i18n.getLocalization("agentUI", "labels").EVENTLOG;
			</script>
			<textarea dojoType="dijit.form.SimpleTextarea" id="eventLogText" name="eventLogText" width="80%" rows="1000" readonly>
			</textarea>
		</div>
		
	</div>
	
	<div dojoType = "dijit.layout.ContentPane" region="bottom" style="text-align:center">
		<button dojoType="dijit.form.Button" id="bgoavail" onclick=agent.setState("idle")>
			<script type="dojo/method" event="postCreate">
				this.setLabel(dojo.i18n.getLocalization("agentUI", "labels").GOAVAILABLE);
			</script>
		</button>
		<div dojoType="dijit.form.DropDownButton" id="bgoreleased" style="display:none">
			<script type="dojo/method" event="postCreate">
				this.setLabel(dojo.i18n.getLocalization("agentUI", "labels").GORELEASED);
			</script>
			<span>000</span>
			<div dojoType="dijit.Menu" id="releasedmenu">
			</div>
		</div>

		<div dojoType="dijit.form.DropDownButton" id="boutboundcall" style="display:none">
			<script type="dojo/method" event="postCreate">
				this.setLabel(dojo.i18n.getLocalization("agentUI", "labels").MKOUTBOUND);
			</script>
			<span>000</span>
			<div dojoType="dijit.Menu" id="outboundmenu">
			</div>
		</div>

		<div dojoType="dijit.form.DropDownButton" id="btransfer" style="display:none">
			<script type="dojo/method" event="postCreate">
				this.setLabel(dojo.i18n.getLocalization("agentUI", "labels").TRANSFERTOMENU);
			</script>
			<span>000</span>
			<div dojoType="dijit.Menu" id="transfertomenu">
				<div dojoType="dijit.PopupMenuItem" id="transferToAgentMenu">
					<script type="dojo/method" event="postCreate">
						this.setLabel(dojo.i18n.getLocalization("agentUI", "labels").AGENT);
					</script>
					<script type="dojo/connect" event="onMouseEnter">
						Agent.getAvailAgents();
					</script>
					<span>000</span>
					<div dojoType="dijit.Menu" id="transferToAgentMenuDyn">
					</div>
				</div>
				<div dojoType="dijit.PopupMenuItem">
					<script type="dojo/method" event="postCreate">
						this.setLabel(dojo.i18n.getLocalization("agentUI", "labels").QUEUE);
					</script>
					<span>000</span>
					<div dojoType="dijit.Menu">
					</div>
				</div>
				<div dojoType="dijit.MenuItem" label="Transfer to 3rd Party"
					onclick="Agent.warmtransfer('2440131');">
				</div>
			</div>
		</div>

		<div id="foo" style="clear:both;"><input type="text" value="" dojoType="dijit.form.ValidationTextBox" regExp="[\d]+" invalidMessage="Invalid number" id="dialbox" /></div>
		<button dojoType="dijit.form.Button" id="bdial" style="display:none" onclick=agent.dial()>
			<script type="dojo/method" event="postCreate">
				this.setLabel(dojo.i18n.getLocalization("agentUI", "labels").DIAL);
			</script>
		</button>
		<button dojoType="dijit.form.Button" id="bcancel" style="display:none" onclick=agent.setState("idle")>
			<script type="dojo/method" event="postCreate">
				this.setLabel(dojo.i18n.getLocalization("agentUI", "labels").CANCEL);
			</script>
		</button>
		<button dojoType="dijit.form.Button" id="banswer" style="display:none" onclick=agent.setState("oncall")>
			<script type="dojo/method" event="postCreate">
				this.setLabel(dojo.i18n.getLocalization("agentUI", "labels").ANSWER);
			</script>
		</button>
		<button dojoType="dijit.form.Button" id="bhangup" style="display:none" onclick=agent.setState("wrapup")>
			<script type="dojo/method" event="postCreate">
				this.setLabel(dojo.i18n.getLocalization("agentUI", "labels").HANGUP);
			</script>
		</button>
	</div>

	<div dojoType="dojox.layout.Dock" id="rightDock" region="right">
	
	</div>
</div>

</body>
</html>
